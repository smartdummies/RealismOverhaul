@PART[lr91_master]:FOR[RealismOverhaul]:NEEDS[SquadExpansion/MakingHistory/Parts/Engine/Assets]
{
	@hasModels = true
	
	//Add the model
	MODEL
	{
		name = MakingHistory
		model = SquadExpansion/MakingHistory/Parts/Engine/Assets/LV-T91
		scale = 1.62, 1.62, 1.62
		position = 0.0, -1.361256, 0.0
	}
	//Vernier
	MODEL
	{
		name = MakingHistoryVernier
		model = RealismOverhaul/Models/KVDvernVSR
		position = .70903, -1.499866, 0
		rotation = 12.5, -90.0, 0.0
		scale = 0.01, 0.01, 0.01
	}
	
	//Create the variant that uses this model
	@MODULE[ModulePartVariants]
	{		
		VARIANT
		{
			name = MakingHistoryBare
			displayName = Making History (Bare)
			primaryColor = #a0407d
			secondaryColor = #9c9c9c
			GAMEOBJECTS
			{
				MakingHistory = true
				MakingHistoryVernier = true
				Cap_1875 = false
				Cap_Bare = true
			}
			NODES
			{
					node_stack_bottom = 0.0, -3.17526, 0.0, 0.0, -1.0, 0.0, 2
			}	
		}
		VARIANT
		{
			name = MakingHistoryCap
			displayName = Making History (Cap)
			primaryColor = #a0407d
			secondaryColor = #9c9c9c
			GAMEOBJECTS
			{
				MakingHistory = true
				MakingHistoryVernier = true
				Cap_1875 = true
				Cap_Bare = false
			}
			NODES
			{
					node_stack_bottom = 0.0, -3.17526, 0.0, 0.0, -1.0, 0.0, 2
			}	
		}
	}
	
	//Thrusttransform for vernier engine
	@MODULE[ModuleEnginesRF]:HAS[!THRUST_TRANSFORM[vern01Transform]]
	{
		THRUST_TRANSFORM
		{
			name = vern01Transform
			multiplier = 0.01
		}
	}
	
	//Vernier gimbal
	@MODULE[ModuleGimbal]:HAS[#gimbalType[vernier],~gimbalTransformName[vern01Transform]]
	{
		gimbalTransformName,0 = vern01Transform
	}
	
	//Assign as the initial variant if it is not yet assigned
	@MODULE[ModulePartVariants]:HAS[#baseVariant[UNASSIGNED]]
	{
		@baseVariant = MakingHistory
	}
}

//Remove the model from all other variants
//Run after RealismOverhaul so all variants are created
@PART[lr91_master]:AFTER[RealismOverhaul]:NEEDS[SquadExpansion/MakingHistory/Parts/Engine/Assets]
{
	
	//Set the MakingHistory model to false for all other variants
	@MODULE[ModulePartVariants]
	{
		@VARIANT,*
		{
			@GAMEOBJECTS:HAS[~MakingHistory[*rue]]
			{
				%MakingHistory = false
				%MakingHistoryVernier = false
				Cap_1875 = false
				Cap_Bare = false
			}
		}
	}
}